{{ $has_images := (isset .Params.images 0) }}
<article class="card">
  {{ if $has_images }}
  {{ $image_resource := resources.Get (index .Params.images 0) }}
  {{ if $image_resource }}
  {{ $featured_image :=  $image_resource.Fit "500x300" }}
  <div class="card-image">
    <a href="{{.RelPermalink}}">
      <figure class="image">
        <img src="{{ $featured_image.RelPermalink }}" alt="image from {{ .Title }}" loading="lazy" />
      </figure>
    </a>
  </div>
  {{ else }}
  {{ $featured_image :=  (trim (index .Params.images 0) "/") | absURL }}
  <div class="card-image">
    <a href="{{.RelPermalink}}">
      <figure class="image">
        <img src="{{ $featured_image }}" alt="image from {{ .Title }}" loading="lazy" />
      </figure>
    </a>
  </div>
  {{ end }}
  {{ end }}
  <div class="card-header">
    <h3 class="card-header-title">
      <a href="{{ .RelPermalink }}"> {{ .Title }} </a>
    </h3>
  </div>
  <div class="card-content">
    {{ .Summary }}
    <br />
    <br />
    <i class="far fa-calendar"></i>
    <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
      {{- .Date.Format "January 2, 2006" -}}
    </time>
    <br />
    <br />
    {{- partial "categories.html" . -}} {{- partial "tags.html" . -}}
  </div>
</article>
